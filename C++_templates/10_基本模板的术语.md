# 第十章 基本模板的术语

## “类模板”还是“模板类”

• 术语“类模板”表示类是一个模板。也就是说，它是一族类的参数化描述。

## 替换、实例化和特化

* 替换： 处理使用模板的源代码时，C++编译器必须用具体的模板实参替换模板中的模板形参。有时，这种替换是暂时的:编译器可能需要检查替换是否有效。
* 模板实例化： 通过替换模板的具体参数，为模板中的常规类、类型别名、函数、成员函数或变量实际创建定义的过程，称为模板实例化。
* 特化：由实例化或不完全实例化(即类、函数、成员函数或变量)产生的实体一般称为特化。

## 声明和定义

* 声明
声明是一种C++构造，在C++作用域中引入或重新引入一个名称。此介绍会包含该名称的部分类别，但进行有效声明时不需要详细信息。
宏定义和goto标签在C++中不是声明。

* 定义
对于类类型定义，必须提供带括号的主体。对于函数定义，这就必须提供(一般情况下)用大括号括起来的函数体，或者必须将函数指定为=default或=delete。对于变量，初始化或缺少extern说明符会导致声明变成定义。

### 完整类型与不完整类型

不完整类型是以下类型之一：

• 已声明但尚未定义的类类型。
• 未指定边界的数组类型。
• 不完整类型的数组类型。
• 无效类型
• 枚举类型，基础类型或枚举值未定义。
• 上面应用`const`或`volatile`的类型。

## 定义规则

C++ 语言定义对各种实体的声明施加了一些约束。这些约束的总和称为单一定义规则或`ODR`。

• 普通(即非模板)非内联函数和成员函数，以及(非内联)全局变量和静态数据成员在整个程序中应该只定义一次。
• 类类型(包括结构和联合)、模板(包括偏特化，但不包括全特化)以及内联函数和变量在每个翻译单元中最多定义一次，而且所有这些定义应该相同。

可链接实体： 指的是以下任何一种:一个函数或成员函数，一个全局变量或一个静态数据成员，包括从模板生成的，对链接器可见的东西。

## 模板实参与模板形参

示例：

```cpp
template<typename T, int N>
class ArrayInClass {
  public:
  T array[N];
};

class DoubleArrayInClass {
  public:
  double array[10];
}
```

* 模板参数是那些列在模板声明或定义中的关键字Template之后的参数(示例中是T和N)。
* 模板实参是替代模板形参的项(示例中是double和10)。与模板形参不同，模板实参可以不仅仅是“名称”

## 最后

• 对于属于模板的类、函数和变量，请分别使用类模板、函数模板和变量模板。
• 模板实例化是通过将模板形参替换为具体实参，来创建常规类或函数的过程。产生的实体是特化模板类型。
• 类型可以是完整的或不完整的。
• 根据单一定义规则(ODR):程序中，非内联函数、成员函数、全局变量和静态数据成员应该只定义一次。

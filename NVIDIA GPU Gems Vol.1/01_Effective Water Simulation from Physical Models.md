# Chapter 1. Effective Water Simulation from Physical Models

利用物理模型进行有效的水模拟。
本章介绍一个在 GPU 上模拟和渲染大型水体的系统。该系统结合了基本网格的几何起伏和动态法线贴图的生成。
在过去一些年(指该书发售以前)，通用的水面水体模拟是从离线模拟迁移而来，一些相关的成果：
基于快速傅里叶变换的水体模拟(Tessendorf 2001)
基于体素的纳维-斯托克斯方程简化形式的解决方案(Yann 2003)
基于CPU上实现的一些效果(Enright 2002)等

在顶点着色器中对四个正弦波求和以计算表面高度和方向的方法(Isidoro 2002)
使用三个格氏波计算表面高度的着色器(Laeuchli 2002)

接下来，先从简单的正弦函数求和开始，然后再根据情况扩展到稍复杂的函数。我们还将该技术扩展到像素着色器领域，使用周期性波函数之和创建动态平铺凹凸贴图，以捕捉水面的更多细节。
本章重点解释系统参数的物理意义，说明用正弦波之和近似水面并不像通常介绍的那样是临时性的。

## 正弦求和近似

正弦波之和给出了一个连续函数，描述了所有点的高度和水面方向。在处理顶点时，我们根据每个顶点的水平位置对该函数进行采样，使网格符合连续水面的网格划分极限。在几何分辨率以下，我们将继续使用纹理空间技术。

在渲染目标纹理时，我们通过简单的像素着色器操作对正弦和近似值的法线进行采样，从而生成表面的法线贴图。为每一帧渲染法线贴图可以让有限的一组正弦波独立移动，从而大大增强渲染的真实感。


